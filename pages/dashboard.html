<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Trustlink – Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="../css/sidebar.css">
  <link rel="stylesheet" href="../css/dashboard.css">
</head>

<body class="bg-slate-100 text-slate-800">

<!-- Sidebar -->
<div id="sidebar-container"></div>

<!-- Main -->
<main class="p-4 pb-28 max-w-md mx-auto">

  <!-- Header -->
  <header class="flex items-center justify-between mb-6">
    <button onclick="openSidebar()" class="p-2 rounded-xl bg-white shadow">
      <i data-feather="menu"></i>
    </button>

    <h1 class="text-lg font-semibold">Dashboard</h1>

    <button class="p-3 rounded-2xl bg-indigo-500 text-white shadow-lg">
      <i data-feather="bell"></i>
    </button>
  </header>

  <!-- Wallet card -->
  <section class="bg-gradient-to-br from-indigo-500 via-violet-500 to-fuchsia-500 
                  text-white rounded-3xl p-6 shadow-xl mb-6">

    <p class="text-sm opacity-90">Solde total</p>
    <h2 class="text-4xl font-bold mt-2">$ 2,450.00</h2>
    <p class="text-sm mt-1 opacity-90">≈ 6 615 000 CDF</p>

    <div class="mt-5 flex gap-3">
      <span class="px-4 py-1 rounded-full bg-white/20 text-sm">USD</span>
      <span class="px-4 py-1 rounded-full bg-white/20 text-sm">CDF</span>
    </div>
  </section>

  <!-- Charts -->
  <section class="space-y-6 mb-6">

    <!-- Line chart -->
    <div class="bg-white rounded-3xl p-5 shadow">
      <div class="flex items-center justify-between mb-4">
        <h3 class="font-semibold">Évolution du solde</h3>
        <i data-feather="trending-up" class="text-indigo-500"></i>
      </div>
      <canvas id="balanceChart" height="120"></canvas>
    </div>

    <!-- Doughnut -->
    <div class="bg-white rounded-3xl p-5 shadow">
      <div class="flex items-center justify-between mb-4">
        <h3 class="font-semibold">Flux financiers</h3>
        <i data-feather="pie-chart" class="text-indigo-500"></i>
      </div>
      <canvas id="flowChart" height="120"></canvas>
    </div>

  </section>

  <!-- Recent transactions -->
  <section class="bg-white rounded-3xl p-5 shadow">
    <h3 class="font-semibold mb-4">Transactions récentes</h3>

    <!-- Scrollable list -->
    <div class="space-y-4 max-h-64 overflow-y-auto pr-1">

      <!-- Entry -->
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="p-2 rounded-xl bg-green-100 text-green-600">
            <i data-feather="arrow-down-left"></i>
          </div>
          <div>
            <p class="font-medium">Junior Kalala</p>
            <p class="text-xs text-slate-400">Entrée</p>
          </div>
        </div>
        <span class="font-semibold text-green-600">+ $120</span>
      </div>

      <!-- Exit -->
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="p-2 rounded-xl bg-red-100 text-red-600">
            <i data-feather="arrow-up-right"></i>
          </div>
          <div>
            <p class="font-medium">Grâce Mukendi</p>
            <p class="text-xs text-slate-400">Sortie</p>
          </div>
        </div>
        <span class="font-semibold text-red-600">- 150 000 CDF</span>
      </div>

      <!-- Entry -->
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="p-2 rounded-xl bg-green-100 text-green-600">
            <i data-feather="arrow-down-left"></i>
          </div>
          <div>
            <p class="font-medium">Moïse Tshibanda</p>
            <p class="text-xs text-slate-400">Entrée</p>
          </div>
        </div>
        <span class="font-semibold text-green-600">+ $75</span>
      </div>

      <!-- Exit -->
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="p-2 rounded-xl bg-red-100 text-red-600">
            <i data-feather="arrow-up-right"></i>
          </div>
          <div>
            <p class="font-medium">Patrick Mwamba</p>
            <p class="text-xs text-slate-400">Sortie</p>
          </div>
        </div>
        <span class="font-semibold text-red-600">- $50</span>
      </div>

    </div>
  </section>

</main>

<!-- Load sidebar -->
<script>
  fetch("../partials/sidebar.html")
    .then(r => r.text())
    .then(html => {
      document.getElementById("sidebar-container").innerHTML = html;
      feather.replace();
    });
</script>

<script src="../js/sidebar.js"></script>

<script>
  feather.replace();

  // Line chart
  new Chart(document.getElementById("balanceChart"), {
    type: "line",
    data: {
      labels: ["Jan", "Fév", "Mar", "Avr", "Mai", "Juin"],
      datasets: [{
        data: [1800, 1950, 2100, 2050, 2300, 2450],
        borderColor: "#6366f1",
        backgroundColor: "rgba(99,102,241,0.15)",
        tension: 0.45,
        fill: true
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: { x: { display: false }, y: { display: false } }
    }
  });

  // Doughnut chart
  new Chart(document.getElementById("flowChart"), {
    type: "doughnut",
    data: {
      labels: ["Entrées", "Sorties"],
      datasets: [{
        data: [68, 32],
        backgroundColor: ["#22c55e", "#ef4444"]
      }]
    },
    options: {
      plugins: { legend: { position: "bottom" } }
    }
  });
</script>

</body>
</html>
